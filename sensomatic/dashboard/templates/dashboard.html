{% extends 'master.html' %}
{% block content %}
<style>
    .route-user-none{
        width:10%;  
        display:inline-block;
        background-color: #5ad94c;
        top: 2px; 
        left: 2px; 
        right: 2px; 
        bottom: 2px; 
        padding: 1rem; 
        box-shadow: inset 0 0 0 2px black;
        margin-bottom: 2em;
    }

    .route-user-none[driver-value="None"]{
        width:10%;  
        display:inline-block;
        background-color: #FFF4A3;
        top: 2px; 
        left: 2px; 
        right: 2px; 
        bottom: 2px; 
        padding: 1rem; 
        box-shadow: inset 0 0 0 2px black;
        margin-bottom: 2em;
    }

    </style>
 <!-- Her bliver ruterne hentet -->

 {% for route in routes %}
<div id="div-color-{{ route.id }}" class="route-user-none" driver-value="{{ route.user }}">
    <h2>{{route.route_name}}</h2>
 <select id="{{route.id}}">
    <option value="{{route.user}}" selected>{{route.user}}</option>
    {% for skraldemand in user %}
    {% if skraldemand != route.user %}
    <option value="{{ skraldemand }}">{{ skraldemand }}</option>
    {% endif %}
    {% endfor %}
</select>

{% for adress in route.coordinate_to_adress %}
<p>{{adress}}</p>
{% endfor %}


<button style="float: left;" onclick="sendCall({id:{{route.id}}, driver:document.getElementById({{route.id}}).value})">Submit</button>
</div>
{% endfor %}


    <!-- Her ses logud knappen -->
    <form action="{% url 'logout' %}" method="post">
        {% csrf_token %}
        <button type="submit">Log out</button>
    </form>



<script>
async function sendCall(data){
    const config  = {
        method: "POST",
        body: JSON.stringify(data)
    }
    fetch("{% url 'add_driver' %}", config).then(res => {
        console.log("KÃ¸rer tildelt")
        alert('Ruten er tildelt')
    }).catch(error =>{
        alert('Der skete en fejl')
    })
}

</script>


{% endblock content %}
